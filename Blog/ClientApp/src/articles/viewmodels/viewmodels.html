<!DOCTYPE html>
<!-- saved from url=(0011)about:blank -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta charset="" utf-8""="">
    <!--<base href="http://browsing-file-host/">--><base href=".">
    <style>
        :root { --vs-scrollbar: #e8e8ec; --vs-scrollbar-thumb: #c2c3c9; --vs-scrollbar-hover: #686868;}
        html, body {margin: 6px; padding-bottom:10px}
        /* From https://github.com/sindresorhus/github-markdown-css */

.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;margin:0;color:#24292f;background-color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:' ';display:inline-block;background-color:currentColor;-webkit-mask-image:url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");mask-image:url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>")}.markdown-body details,.markdown-body figcaption,.markdown-body figure{display:block}.markdown-body summary{display:list-item}.markdown-body [hidden]{display:none !important}
.markdown-body a{background-color:transparent;color:#0969da;text-decoration:none}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body abbr[title]{border-bottom:none;text-decoration:underline dotted}.markdown-body b,.markdown-body strong{font-weight:600}.markdown-body dfn{font-style:italic}.markdown-body h1{margin:.67em 0;font-weight:600;padding-bottom:.3em;font-size:2em;border-bottom:1px solid hsla(210,18%,87%,1)}.markdown-body mark{background-color:#fff8c5;color:#24292f}.markdown-body small{font-size:90%}.markdown-body sub,.markdown-body sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.markdown-body sub{bottom:-.25em}.markdown-body sup{top:-.5em}.markdown-body img{border-style:none;max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body code,.markdown-body kbd,.markdown-body pre,.markdown-body samp{font-family:monospace,monospace;font-size:1em}.markdown-body figure{margin:1em 40px}.markdown-body hr{box-sizing:content-box;overflow:hidden;background:0 0;border-bottom:1px solid hsla(210,18%,87%,1);height:.25em;padding:0;margin:24px 0;background-color:#d0d7de;border:0}
.markdown-body input{font:inherit;margin:0;overflow:visible;font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body [type=button],.markdown-body [type=reset],.markdown-body [type=submit]{-webkit-appearance:button}.markdown-body [type=button]::-moz-focus-inner,.markdown-body [type=reset]::-moz-focus-inner,.markdown-body [type=submit]::-moz-focus-inner{border-style:none;padding:0}.markdown-body [type=button]:-moz-focusring,.markdown-body [type=reset]:-moz-focusring,.markdown-body [type=submit]:-moz-focusring{outline:1px dotted ButtonText}.markdown-body [type=checkbox],.markdown-body [type=radio]{box-sizing:border-box;padding:0}.markdown-body [type=number]::-webkit-inner-spin-button,.markdown-body [type=number]::-webkit-outer-spin-button{height:auto}.markdown-body [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.markdown-body [type=search]::-webkit-search-cancel-button,.markdown-body [type=search]::-webkit-search-decoration{-webkit-appearance:none}.markdown-body ::-webkit-input-placeholder{color:inherit;opacity:.54}
.markdown-body ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.markdown-body a:hover{text-decoration:underline}.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{display:table;clear:both;content:""}.markdown-body table{border-spacing:0;border-collapse:collapse;display:block;width:max-content;max-width:100%;overflow:auto}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>*:not(summary){display:none !important}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;line-height:10px;color:#24292f;vertical-align:middle;background-color:#f6f8fa;border:solid 1px rgba(175,184,193,.2);border-bottom-color:rgba(175,184,193,.2);border-radius:6px;box-shadow:inset 0 -1px 0 rgba(175,184,193,.2)}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}
.markdown-body h2{font-weight:600;padding-bottom:.3em;font-size:1.5em;border-bottom:1px solid hsla(210,18%,87%,1)}.markdown-body h3{font-weight:600;font-size:1.25em}.markdown-body h4{font-weight:600;font-size:1em}.markdown-body h5{font-weight:600;font-size:.875em}.markdown-body h6{font-weight:600;font-size:.85em;color:#57606a}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0;padding:0 1em;color:#57606a;border-left:.25em solid #d0d7de}.markdown-body ul {list-style:disc}.markdown-body ul,.markdown-body ol{margin-top:0;margin-bottom:0;padding-left:2em}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ul ul ol,.markdown-body ul ol ol,.markdown-body ol ul ol,.markdown-body ol ol ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body tt,.markdown-body code{font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px;word-wrap:normal}
.markdown-body .octicon{display:inline-block;overflow:visible !important;vertical-align:text-bottom;fill:currentColor}.markdown-body ::placeholder{color:#6e7781;opacity:1}.markdown-body input::-webkit-outer-spin-button,.markdown-body input::-webkit-inner-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body .pl-c{color:#6e7781}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#0550ae}.markdown-body .pl-e,.markdown-body .pl-en{color:#8250df}.markdown-body .pl-smi,.markdown-body .pl-s .pl-s1{color:#24292f}.markdown-body .pl-ent{color:#116329}.markdown-body .pl-k{color:#cf222e}.markdown-body .pl-s,.markdown-body .pl-pds,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sre,.markdown-body .pl-sr .pl-sra{color:#0a3069}.markdown-body .pl-v,.markdown-body .pl-smw{color:#953800}.markdown-body .pl-bu{color:#82071e}.markdown-body .pl-ii{color:#f6f8fa;background-color:#82071e}.markdown-body .pl-c2{color:#f6f8fa;background-color:#cf222e}
.markdown-body .pl-sr .pl-cce{font-weight:700;color:#116329}.markdown-body .pl-ml{color:#3b2300}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#0550ae}.markdown-body .pl-mi{font-style:italic;color:#24292f}.markdown-body .pl-mb{font-weight:700;color:#24292f}.markdown-body .pl-md{color:#82071e;background-color:#ffebe9}.markdown-body .pl-mi1{color:#116329;background-color:#dafbe1}.markdown-body .pl-mc{color:#953800;background-color:#ffd8b5}.markdown-body .pl-mi2{color:#eaeef2;background-color:#0550ae}.markdown-body .pl-mdr{font-weight:700;color:#8250df}.markdown-body .pl-ba{color:#57606a}.markdown-body .pl-sg{color:#8c959f}.markdown-body .pl-corl{text-decoration:underline;color:#0a3069}.markdown-body [data-catalyst]{display:block}.markdown-body g-emoji{font-family:"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:1em;font-style:normal !important;font-weight:400;line-height:1;vertical-align:-.075em}.markdown-body g-emoji img{width:1em;height:1em}
.markdown-body:before{display:table;content:""}.markdown-body:after{display:table;clear:both;content:""}.markdown-body>*:first-child{margin-top:0 !important}.markdown-body>*:last-child{margin-bottom:0 !important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#cf222e}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body p,.markdown-body blockquote,.markdown-body ul,.markdown-body ol,.markdown-body dl,.markdown-body table,.markdown-body pre,.markdown-body details{margin-top:0;margin-bottom:16px}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body sup>a:before{content:"["}.markdown-body sup>a:after{content:"]"}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#24292f;vertical-align:middle;visibility:hidden}
.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 tt,.markdown-body h1 code,.markdown-body h2 tt,.markdown-body h2 code,.markdown-body h3 tt,.markdown-body h3 code,.markdown-body h4 tt,.markdown-body h4 code,.markdown-body h5 tt,.markdown-body h5 code,.markdown-body h6 tt,.markdown-body h6 code{padding:0 .2em;font-size:inherit}.markdown-body ul.no-list,.markdown-body ol.no-list{padding:0;list-style-type:none}.markdown-body ol[type="1"]{list-style-type:decimal}.markdown-body ol[type=a]{list-style-type:lower-alpha}
.markdown-body ol[type=i]{list-style-type:lower-roman}.markdown-body div>ol:not([type]){list-style-type:decimal}.markdown-body ul ul,.markdown-body ul ol,.markdown-body ol ol,.markdown-body ol ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table th{font-weight:600}.markdown-body table th,.markdown-body table td{padding:6px 13px;border:1px solid #d0d7de}.markdown-body table tr{background-color:#fff;border-top:1px solid hsla(210,18%,87%,1)}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body table img{background-color:transparent}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}
.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #d0d7de}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#24292f}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}
.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(175,184,193,.2);border-radius:6px}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre code{font-size:100%}.markdown-body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:6px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}
.markdown-body .csv-data .blob-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:600;background:#f6f8fa;border-top:0}.markdown-body .footnotes{font-size:12px;color:#57606a;border-top:1px solid #d0d7de}.markdown-body .footnotes ol{padding-left:16px}.markdown-body .footnotes li{position:relative}.markdown-body .footnotes li:target:before{position:absolute;top:-8px;right:-8px;bottom:-8px;left:-24px;pointer-events:none;content:"";border:2px solid #0969da;border-radius:6px}.markdown-body .footnotes li:target{color:#24292f}.markdown-body .footnotes .data-footnote-backref g-emoji{font-family:monospace}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item label{font-weight:400}.markdown-body .task-list-item.enabled label{cursor:pointer}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item .handle{display:none}.markdown-body .task-list-item-checkbox{margin:0 .2em .25em -1.6em;vertical-align:middle}
.markdown-body .contains-task-list:dir(rtl) .task-list-item-checkbox{margin:0 -1.6em .25em .2em}.markdown-body ::-webkit-calendar-picker-indicator{filter:invert(50%)}
    </style>
    <title>Markdown Preview</title>
    <meta http-equiv="cache-control" content="no-cache">
</head>
<body>
    <div id="___markdown-content___" class="markdown-body"><article>
<p id="pragma-line-2">This post is an update of an <a href="http://stackoverflow.com/questions/11064316/what-is-viewmodel-in-mvc/29135747#29135747" target="_blank">
answer I posted on Stackoverflow</a>.</p>
<p id="pragma-line-5">A ViewModel is an object that contains all the properties and methods necessary to render a view.</p>
<p id="pragma-line-7">A ViewModel is typically composed of properties that are related to a domain object such as a customer or an order.  In addition a ViewModel may also contain properties that are related to a page or an application (user name, application name), as well as properties that a rendering engine can use to render a page properly (is an order shipped, is an account past due, etc.).</p>
<p id="pragma-line-9">One of many reasons to use a ViewModel is that ViewModels provide a way to unit test certain presentation tasks such as handling user input, validating data, retrieving data for display, etc. ViewModels also provide a convenient object to pass to a rendering engine to create an html page.</p>
<p id="pragma-line-11">As a developer you probably use several different kinds of models in your applications.  Three types of models that are quite common are Domain Models, Presentation Models, and ViewModels.  In some ways these models are very similar and can even be substituted for each other.  In other ways they are very different and should be constructed carefully for their particular purpose.  In this article we will compare the three types of models and discuss how they are constructed and used.</p>
<p id="pragma-line-13">Before we get too far down the road we need to address a common question about ViewModels:  should ViewModels be used for web development when using the MVC pattern?  Many developers, especially developers who have used the MVVM (Model-View-ViewModel) pattern, question why the MVC acronym does not provide for ViewModels.  They also question the role of Models in the pattern with respect to ViewModels.  The answer to the first question is a resounding yes - using ViewModels is appropriate and recommended for almost all web development projects using MVC.  The answer to the second question is largely one of terminology and is the subject of this article.</p>
<h2 id="comparison-of-domain-models-presentation-models-and-viewmodels"><a id="pragma-line-16"></a>Comparison of Domain Models, Presentation Models, and ViewModels</h2>
<h3 id="domain-models"><a id="pragma-line-19"></a>Domain Models</h3>
<p id="pragma-line-21">Domain Models are probably the most common type of model used by business applications that read and write to a database.  A Domain Model is a class that models an application data object such as a product, a customer, an order, etc.  A Domain Model will typically have properties that closely match a table schema in a database.  Since Domain Models are so common they are often referred to simply as "Models" or "Entities".  Domain Models are also called Data Transfer Objects (DTO) because of their common usage for shuttling data to and from a data store.</p>
<h4 id="characteristics-of-domain-models"><a id="pragma-line-23"></a>Characteristics of Domain Models</h4>
<ul id="pragma-line-25">
<li id="pragma-line-25">Are domain objects - their definition is dependent on application data.</li>
<li id="pragma-line-26">Usually contain properties only - no code.</li>
<li id="pragma-line-27">Primarily used for transporting data to and from a database.</li>
<li id="pragma-line-28">Properties exactly or closely match fields on a specific table in a data store.</li>
</ul>
<p id="pragma-line-31">Database tables are usually normalized therefore Domain Models are usually normalized also.  This makes them of limited use for presenting data.  However, for certain simple data structures they often do quite well.  Here are two examples of what Domain Models might look like:</p>
<pre><code id="pragma-line-35">public class Customer
{
    public int ID { get; set; }
    public string CustomerName { get; set; }
}


public class Order
{
    public int ID { get; set; }
    public int CustomerID { get; set; }
    public DateTime OrderDate { get; set; }
    public Decimal OrderAmount { get; set; }
}
</code></pre>
<h3 id="presentation-models"><a id="pragma-line-51"></a>Presentation Models</h3>
<p id="pragma-line-53">A presentation model is a <u>utility</u> class that is used to render data for a control or a report.  Presentation models are typically used to model complex data structures that are composed from data from multiple Domain Models.  Presentation models often represent a denormalized view of data.</p>
<h4 id="characteristics-of-presentation-models"><a id="pragma-line-56"></a>Characteristics of Presentation Models</h4>
<ul id="pragma-line-59">
<li id="pragma-line-59"><p id="pragma-line-59">Are domain objects - their definition is dependent on application data.</p>
</li>
<li id="pragma-line-61"><p id="pragma-line-61">Contain mostly properties. Code is typically limited to formatting data or converting to or from a Domain Model.  Presentation Models should not contain business logic.</p>
</li>
<li id="pragma-line-63"><p id="pragma-line-63">Often present a denormalized view of data.  That is, they often combine properties from multiple Domain Models.</p>
</li>
<li id="pragma-line-65"><p id="pragma-line-65">Often contain properties of a different base type than a Domain Model.  For example dollar amounts may be represented as strings so they can contain commas and a currency symbol.</p>
</li>
<li id="pragma-line-67"><p id="pragma-line-67">Often defined by how they are used as well as their object characteristics.  In other words, a simple Domain Model that is used as the backing model for rendering a grid is in fact also a Presentation Model in the context of that grid.</p>
</li>
</ul>
<p id="pragma-line-70">Presentation models are used "as needed" and "where needed" (whereas Domain Models are usually tied to the database schema).  A Presentation Model may be used to model data for an entire page, a grid on a page, or a dropdown on a grid on a page. Presentation Models often contain properties that are other Presentation Models.  Presentation Models are often constructed for a single-use purpose such as to render a specific grid on a single page.</p>
<p id="pragma-line-72">Example presentation model:</p>
<pre><code id="pragma-line-75">public class PresentationOrder
{
    public int OrderID { get; set; }
    public DateTime OrderDate { get; set; }
    public string PrettyDate { get { return OrderDate.ToShortDateString(); } }
    public string CustomerName { get; set; }
    public Decimal OrderAmount { get; set; }
    public string PrettyAmount { get { return string.Format("{0:C}", OrderAmount); } }
}
</code></pre>
<h3 id="viewmodels"><a id="pragma-line-87"></a>ViewModels</h3>
<p id="pragma-line-89">A ViewModel is similar to a presentation model in that is a backing class for rendering a view.  However it is very different from a Presentation Model or a Domain Model in how it is constructed.  ViewModels often contain the same properties as Presentation Models and Domain Models and for this reason they are often confused one for the other.</p>
<h4 id="characteristics-of-viewmodels"><a id="pragma-line-92"></a>Characteristics of ViewModels</h4>
<ul id="pragma-line-94">
<li id="pragma-line-94"><p id="pragma-line-94">Are the single source of data used to render a page or screen.  Usually this means that a ViewModel will expose every property that any control on the page will need to render itself correctly.  Making the ViewModel the single source of data for the view greatly improves its capability and value for unit testing.</p>
</li>
<li id="pragma-line-96"><p id="pragma-line-96">Are <u>composite objects</u> that contain properties that consist of domain data as well as properties that are used by application code.  This characteristic is crucial when designing the ViewModel for reusability and is discussed in the examples below.</p>
</li>
<li id="pragma-line-98"><p id="pragma-line-98">Contain application code.  ViewModels often contain methods that are called during rendering or when the user is interacting with the page.  This code typically relates to event handling, animation, visibility of controls, styling, etc.</p>
</li>
<li id="pragma-line-100"><p id="pragma-line-100">Contain code that calls business services for the purpose of retrieving data or sending it to a database server (this code is often mistakenly placed in a controller). Calling business services from a controller usually limits the usefulness of the ViewModel for unit testing.  To be clear, ViewModels themselves should not contain business logic but should make calls to services which do contain business logic.</p>
</li>
<li id="pragma-line-102"><p id="pragma-line-102">Often contain properties which are other ViewModels for other pages or screens.</p>
</li>
<li id="pragma-line-104"><p id="pragma-line-104">Are typically written uniquely for every page or screen in an application.</p>
</li>
<li id="pragma-line-106"><p id="pragma-line-106">Usually derive from a base class since most pages and screens share common properties.</p>
</li>
</ul>
<h4 id="viewmodel-composition"><a id="pragma-line-108"></a>ViewModel Composition</h4>
<p id="pragma-line-110">As stated earlier, ViewModels are composite objects in that they combine application properties and domain properties on a single object.  Examples of commonly used application properties that are used on ViewModels are:</p>
<ul id="pragma-line-113">
<li id="pragma-line-113"><p id="pragma-line-113">Properties that are used to display application state such as error messages, user name, status, etc.</p>
</li>
<li id="pragma-line-115"><p id="pragma-line-115">Properties used to format, display, stylize, or animate controls.</p>
</li>
<li id="pragma-line-117"><p id="pragma-line-117">Properties used for data binding such as values for input lists and properties that hold intermediate data that is input by the user.</p>
</li>
</ul>
<p id="pragma-line-120">The following examples show why the composite nature of ViewModels is important and how we can best construct a ViewModel that efficient and reusable.</p>
<p id="pragma-line-122">Assume we are writing a web application.  One of the requirements of the application design is that the page title, user name, and application name must be displayed on every page.  If we want to create a page to display a presentation order object, we may modify the presentation model as follows:</p>
<pre><code id="pragma-line-125">public class PresentationOrder
{
    public string PageTitle { get; set; }
    public string UserName { get; set; }
    public string ApplicationName { get; set; }
    public int OrderID { get; set; }
    public DateTime OrderDate { get; set; }
    public string PrettyDate { get { return OrderDate.ToShortDateString(); } }
    public string CustomerName { get; set; }
    public Decimal OrderAmount { get; set; }
    public string PrettyAmount { get { return string.Format("{0:C}", OrderAmount); } }
}
</code></pre>
<p id="pragma-line-139">This design might work... but what if we want to create a page that will display a list of orders?  The PageTitle, UserName, and ApplicationName properties will be repeated and become unwieldy to work with.  Also, what if we want to define some page-level logic in the constructor of the class?  We can no longer do that if we create an instance for every order that will be displayed.</p>
<h4 id="composition-over-inheritance"><a id="pragma-line-141"></a>Composition over inheritance</h4>
<p id="pragma-line-144">Here is a way we might re-factor the order Presentation Model such that it become a true ViewModel and will be useful for displaying a single PresentationOrder object or a collection of PresentationOrder objects:</p>
<pre><code id="pragma-line-148">// Display a single order
public class PresentationOrderVM
{
    // Application properties
    public string PageTitle { get; set; }
    public string UserName { get; set; }
    public string ApplicationName { get; set; }

    // Domain properties
    public PresentationOrder Order { get; set; }
}

// Display a list of orders
public class PresentationOrderVM
{
    // Application properties
    public string PageTitle { get; set; }
    public string UserName { get; set; }
    public string ApplicationName { get; set; }

    // Domain properties
    public List&lt;PresentationOrder&gt; Orders { get; set; }
}
</code></pre>
<p id="pragma-line-173">Looking at the above two classes we can see that one way to think about a ViewModel is that it is a presentation model that contains another presentation model as a property.  The top level presentation model (i.e. ViewModel) contains properties that are relevant to the page or application while presentation model (property) contains properties that are relevant to application data.</p>
<p id="pragma-line-175">We can take our design a step further and create a base ViewModel class that can be used not only for PresentationOrders, but for any other class as well:</p>
<pre><code id="pragma-line-178">public class BaseViewModel
{
    // Application properties
    public string PageTitle { get; set; }
    public string UserName { get; set; }
    public string ApplicationName { get; set; }
}
</code></pre>
<p id="pragma-line-187">Now we can simplify our PresentationOrderVM like this:</p>
<pre><code id="pragma-line-190">public class PresentationOrderVM : BaseViewModel
{
    // Domain properties
    public PresentationOrder Order { get; set; }
}

public class PresentationOrderVM : BaseViewModel
{
    // Domain properties
    public List&lt;PresentationOrder&gt; Orders { get; set; }
}
</code></pre>
<p id="pragma-line-203">We can make our BaseViewModel even more re-usable by making it generic:</p>
<pre><code id="pragma-line-206">public class BaseViewModel&lt;T&gt;
{
    // Application properties
    public string PageTitle { get; set; }
    public string UserName { get; set; }
    public string ApplicationName { get; set; }

    // Domain property
    public T BusinessObject { get; set; }
}
</code></pre>
<p id="pragma-line-218">Now our implementations are effortless:</p>
<pre><code id="pragma-line-221">public class PresentationOrderVM : BaseViewModel&lt;PresentationOrder&gt;
{
    // done!
}

public class PresentationOrderVM : BaseViewModel&lt;List&lt;PresentationOrder&gt;&gt;
{
    // done!
}
</code></pre>
</article>
</div>

</body></html>